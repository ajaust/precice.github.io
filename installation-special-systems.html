<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" installation, building, dependencies, spack, cluster, supercomputer">
<title>Special systems | preCICE - The Coupling Library</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/customstyles-precice.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<link rel="stylesheet" href="css/bookcover.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-precice.css">



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="https://www.precice.org/feed.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">

<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>

<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">
            <span class="navbar-brand-icon">
            <img class="navbar-brand-text" src="images/preCICE_text_28px.svg" alt="preCICE"></span>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                
                <!-- entries without drop-downs appear here -->

                
                

                
                
                
                <li><a href="quickstart.html">Quickstart</a></li>
                
                
                
                <li><a href="docs.html">Docs</a></li>
                
                
                
                <li><a href="tutorials.html">Tutorials</a></li>
                
                
                
                <li><a href="community.html">Community</a></li>
                
                
                
                <li><a href="https://precice.discourse.group/c/news" target="_blank" rel="noopener">Blog</a></li>
                
                
                
                <li><a href="about.html">About</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                

                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <!-- <input type="text" id="search-input" placeholder="search..."> -->
                        <!-- <ul id="results-container"></ul> -->
                        <div id="search-input"></div>
                        <div id="search-results"></div>
                        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
const algoliaSearch = instantsearch({
  appId: 'I5M4FAJYBH',
  apiKey: 'd6f8d2f113bc342ee3f42421d0153bad',
  indexName: 'jekyll',
  searchFunction: function(helper) {          // hide search result in init query
    var searchResults = $('#search-results');
    if (helper.state.query === '') {
      searchResults.hide();
      return;
    }
    helper.search();
    searchResults.show();
  }
});

const hitTemplate = function(hit) {
  let date = '';
  if (hit.date) {
    date = moment.unix(hit.date).format('MMM D, YYYY');
  }

  let url = `${hit.url}#${hit.anchor}`;

  const title = hit._highlightResult.title.value;

  let breadcrumbs = '';
  if (hit._highlightResult.headings) {
    breadcrumbs = hit._highlightResult.headings.map(match => {
      return `<span class="result-breadcrumb">${match.value}</span>`
    }).join(' > ')
  }

  const content = hit._highlightResult.html.value;

  return `
    <div class="result-item">
    <h2><a class="result-link" href="${url}">${title}</a></h2>
    <a href="${url}" class="result-breadcrumbs">${breadcrumbs}</a>
    <div class="result-snippet">${content}</div>
    </div>
  `;
}

algoliaSearch.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-input',
    placeholder: 'Search ...',
    poweredBy: true, // This is required if you're on the free Community plan
    magnifier: false,
    autofocus: false,
    searchOnEnterKeyPressOnly: false,
    reset: true
  })
);

algoliaSearch.addWidget(
  instantsearch.widgets.hits({
    container: '#search-results',
    templates: {
      item: hitTemplate
    }
  })
);

algoliaSearch.start();

/* some hacky JS to hide the search results until we move to docsearch (which is a true autocomplete-type search) */
document.addEventListener('mouseup', function(e) {
  var results = document.getElementById('search-results');
  if (!results.contains(e.target)) {
    results.style.display = 'none';
  }
});
document.addEventListener('mouseup', function(e) {
  var input = document.getElementById('search-input');
  var results = document.getElementById('search-results');
  if (input.contains(e.target)) {
    results.style.display = 'block';
  }
});

</script>

<style type="text/css">
/* has to be placed here to override defaults */
.ais-search-box--powered-by {
  margin-top: -15px;
  padding-right: 5px;
}
.nav li a.ais-search-box--powered-by-link {
  padding: 0;
  background-color: transparent;
  display: inline-block;
  /*padding-right: 15px;*/
}
.ais-search-box--input {
  padding-left: 10px;
  border-color: #0A76BB;
}
.ais-search-box {
  padding: .5em;
  margin-bottom: 0px;
  margin-left: 10px;
  margin-top: 0px;
  width: 20em;
  font-size: 0.8em;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  /*border-color: #0A76BB;*/
  height: 50px;
}
</style>
                    </div>
                    <!--end search-->
                </li>
                <li>
                    <a class="no-icon nav-external" href="https://precice.discourse.group" target="_blank" data-show-count="false" aria-label="Join the discourse community"><i class="fab fa-discourse"></i></a>
                </li>
                <li>
                    <a class="no-icon nav-external" href="https://github.com/precice/precice" target="_blank" data-show-count="false" aria-label="Star precice/precice on GitHub"><i class="fab fa-github"></i></a>
                </li>
                <li>
                    <a class="no-icon nav-external" href="https://twitter.com/preCICE_org" target="_blank" data-show-count="false" aria-label="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
                </li>
                <li>
                    <a class="no-icon nav-external" href="https://www.youtube.com/c/preCICECoupling/" target="_blank" data-show-count="false" aria-label="Subscribe on Youtube"><i class="fab fa-youtube"></i></a>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Docs v2.2.0</li>
  
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Fundamentals" href="#">Fundamentals</a>
    <ul>
      
      
      
      <li><a title="Overview" href="docs.html">Overview</a></li>
      
      
      
      
      
      
      <li><a title="Terminology" href="fundamentals-terminology.html">Terminology</a></li>
      
      
      
      
      
      
      <li><a title="Literature guide" href="fundamentals-literature-guide.html">Literature guide</a></li>
      
      
      
      
      
      
      <li><a title="Roadmap" href="fundamentals-roadmap.html">Roadmap</a></li>
      
      
      
      
      
      
      <li><a title="Output files" href="fundamentals-output-files.html">Output files</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Installation" href="#">Installation</a>
    <ul>
      
      
      
      <li><a title="Overview" href="installation-overview.html">Overview</a></li>
      
      
      
      
      
      
      <li><a title="System packages" href="installation-packages.html">System packages</a></li>
      
      
      
      
      
      
      <li><a title="Using Spack" href="installation-spack.html">Using Spack</a></li>
      
      
      
      <li class="subfolders">
        <a title="Building from source" href="#">Building from source</a>
        <ul>
          
          
          
          <li><a title="Preparation" href="installation-source-preparation.html">Preparation</a></li>
          
          
          
          
          
          <li><a title="Dependencies" href="installation-source-dependencies.html">Dependencies</a></li>
          
          
          
          
          
          <li><a title="Configuration" href="installation-source-configuration.html">Configuration</a></li>
          
          
          
          
          
          <li><a title="Building" href="installation-source-building.html">Building</a></li>
          
          
          
          
          
          <li><a title="Testing" href="installation-source-testing.html">Testing</a></li>
          
          
          
          
          
          <li><a title="Installation" href="installation-source-installation.html">Installation</a></li>
          
          
          
          
          
          <li><a title="Advanced" href="installation-source-advanced.html">Advanced</a></li>
          
          
          
          
          
          <li><a title="Troubleshooting" href="installation-source-troubleshooting.html">Troubleshooting</a></li>
          
          
          
          
          
          <li><a title="Notes on CMake" href="installation-source-cmake.html">Notes on CMake</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      
      
      
      <li><a title="Linking to preCICE" href="installation-linking.html">Linking to preCICE</a></li>
      
      
      
      <li class="subfolders">
        <a title="Language bindings" href="#">Language bindings</a>
        <ul>
          
          
          
          <li><a title="Fortran" href="installation-bindings-fortran.html">Fortran</a></li>
          
          
          
          
          
          <li><a title="Python" href="installation-bindings-python.html">Python</a></li>
          
          
          
          
          
          <li><a title="Matlab" href="installation-bindings-matlab.html">Matlab</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      
      
      
      <li class="active"><a title="Special systems" href="installation-special-systems.html">Special systems</a></li>
      
      
      
      
      
      
      <li><a title="Demo Virtual Machine" href="installation-vm.html">Demo Virtual Machine</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Configuration" href="#">Configuration</a>
    <ul>
      
      
      
      <li><a title="Overview" href="configuration-overview.html">Overview</a></li>
      
      
      
      <li class="subfolders">
        <a title="Basics" href="#">Basics</a>
        <ul>
          
          
          
          <li><a title="Introduction" href="configuration-introduction.html">Introduction</a></li>
          
          
          
          
          
          <li><a title="Mapping" href="configuration-mapping.html">Mapping</a></li>
          
          
          
          
          
          <li><a title="Communication" href="configuration-communication.html">Communication</a></li>
          
          
          
          
          
          <li><a title="Coupling scheme" href="configuration-coupling.html">Coupling scheme</a></li>
          
          
          
          
          
          <li><a title="Acceleration" href="configuration-acceleration.html">Acceleration</a></li>
          
          
          
          
          
          <li><a title="Mesh exchange example" href="configuration-coupling-mesh-exchange.html">Mesh exchange example</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      <li class="subfolders">
        <a title="Advanced topics" href="#">Advanced topics</a>
        <ul>
          
          
          
          <li><a title="Multi coupling" href="configuration-coupling-multi.html">Multi coupling</a></li>
          
          
          
          
          
          <li><a title="Logging" href="configuration-logging.html">Logging</a></li>
          
          
          
          
          
          <li><a title="Export" href="configuration-export.html">Export</a></li>
          
          
          
          
          
          <li><a title="Action" href="configuration-action.html">Action</a></li>
          
          
          
          
          
          <li><a title="Watchpoint" href="configuration-watchpoint.html">Watchpoint</a></li>
          
          
          
          
          
          <li><a title="Watch integral" href="configuration-watchintegral.html">Watch integral</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      
      
      
      <li><a title="XML reference" href="configuration-xml-reference.html">XML reference</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Tooling" href="#">Tooling</a>
    <ul>
      
      
      
      <li><a title="Overview" href="tooling-overview.html">Overview</a></li>
      
      
      
      
      
      
      <li><a title="Config visualization" href="tooling-config-visualization.html">Config visualization</a></li>
      
      
      
      
      
      
      <li><a title="Performance analysis" href="tooling-performance-analysis.html">Performance analysis</a></li>
      
      
      
      
      
      
      <li><a title="RBF shape calculator" href="tooling-rbf-shape.html">RBF shape calculator</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Provided adapters" href="#">Provided adapters</a>
    <ul>
      
      
      
      <li><a title="Overview" href="adapters-overview.html">Overview</a></li>
      
      
      
      <li class="subfolders">
        <a title="OpenFOAM" href="#">OpenFOAM</a>
        <ul>
          
          
          
          <li><a title="Overview" href="adapter-openfoam-overview.html">Overview</a></li>
          
          
          
          
          
          <li><a title="Get the adapter" href="adapter-openfoam-get.html">Get the adapter</a></li>
          
          
          
          
          
          <li><a title="Configuration" href="adapter-openfoam-config.html">Configuration</a></li>
          
          
          
          
          
          <li><a title="Extending" href="adapter-openfoam-extend.html">Extending</a></li>
          
          
          
          
          
          <li><a title="OpenFOAM support" href="adapter-openfoam-support.html">OpenFOAM support</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      <li class="subfolders">
        <a title="deal.II" href="#">deal.II</a>
        <ul>
          
          
          
          <li><a title="Overview" href="adapter-dealii-overview.html">Overview</a></li>
          
          
          
          
          
          <li><a title="Get the adapter" href="adapter-dealii-get.html">Get the adapter</a></li>
          
          
          
          
          
          <li><a title="Configuration" href="adapter-dealii-configure.html">Configuration</a></li>
          
          
          
          
          
          <li><a title="For your own deal.II code" href="adapter-dealii-own-project.html">For your own deal.II code</a></li>
          
          
          
          
          
          <li><a title="Limitations and assumptions" href="adapter-dealii-limitations.html">Limitations and assumptions</a></li>
          
          
          
          
          
          <li><a title="Solver details" href="adapter-dealii-solver-details.html">Solver details</a></li>
          
          
          
          
          
          <li><a title="Coupling Meshes in deal.II" href="adapter-dealii-coupling-meshes.html">Coupling Meshes in deal.II</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      <li class="subfolders">
        <a title="CalculiX" href="#">CalculiX</a>
        <ul>
          
          
          
          <li><a title="Overview" href="adapter-calculix-overview.html">Overview</a></li>
          
          
          
          
          
          <li><a title="Get CalculiX" href="adapter-calculix-get-calculix.html">Get CalculiX</a></li>
          
          
          
          
          
          <li><a title="Get the adapter" href="adapter-calculix-get-adapter.html">Get the adapter</a></li>
          
          
          
          
          
          <li><a title="Configuration" href="adapter-calculix-config.html">Configuration</a></li>
          
          
          
          
          
          <li><a title="Troubleshooting" href="adapter-calculix-troubleshooting.html">Troubleshooting</a></li>
          
          
          
          
          
          <li><a title="Building on SuperMUC" href="adapter-calculix-supermuc.html">Building on SuperMUC</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      <li class="subfolders">
        <a title="SU2" href="#">SU2</a>
        <ul>
          
          
          
          <li><a title="Overview" href="adapter-su2-overview.html">Overview</a></li>
          
          
          
          
          
          <li><a title="Get the adapter" href="adapter-su2-get.html">Get the adapter</a></li>
          
          
          
          
          
          <li><a title="Configuration" href="adapter-su2-configure.html">Configuration</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      
      
      
      <li><a title="FEniCS" href="adapter-fenics.html">FEniCS</a></li>
      
      
      
      
      
      
      <li><a title="code_aster" href="adapter-code_aster.html">code_aster</a></li>
      
      
      
      
      
      
      <li><a title="Nutils" href="adapter-nutils.html">Nutils</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Couple your code" href="#">Couple your code</a>
    <ul>
      
      
      
      <li><a title="Overview" href="couple-your-code-overview.html">Overview</a></li>
      
      
      
      
      
      
      <li><a title="Application programming interface" href="couple-your-code-api.html">Application programming interface</a></li>
      
      
      
      <li class="subfolders">
        <a title="Step by step" href="#">Step by step</a>
        <ul>
          
          
          
          <li><a title="Step 1 – Preparation" href="couple-your-code-preparing-your-solver.html">Step 1 – Preparation</a></li>
          
          
          
          
          
          <li><a title="Step 2 – Steering methods" href="couple-your-code-steering-methods.html">Step 2 – Steering methods</a></li>
          
          
          
          
          
          <li><a title="Step 3 – Mesh and data access" href="couple-your-code-mesh-and-data-access.html">Step 3 – Mesh and data access</a></li>
          
          
          
          
          
          <li><a title="Step 4 – Coupling flow" href="couple-your-code-coupling-flow.html">Step 4 – Coupling flow</a></li>
          
          
          
          
          
          <li><a title="Step 5 – Non-matching timestep sizes" href="couple-your-code-timestep-sizes.html">Step 5 – Non-matching timestep sizes</a></li>
          
          
          
          
          
          <li><a title="Step 6 – Implicit coupling" href="couple-your-code-implicit-coupling.html">Step 6 – Implicit coupling</a></li>
          
          
          
          
          
          <li><a title="Step 7 – Data initialization" href="couple-your-code-initializing-coupling-data.html">Step 7 – Data initialization</a></li>
          
          
          
          
          
          <li><a title="Step 8 – Mesh connectivity" href="couple-your-code-defining-mesh-connectivity.html">Step 8 – Mesh connectivity</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      <li class="subfolders">
        <a title="Advanced topics" href="#">Advanced topics</a>
        <ul>
          
          
          
          <li><a title="Adapter software engineering" href="couple-your-code-adapter-software-engineering.html">Adapter software engineering</a></li>
          
          
          
          
          
          <li><a title="Initialization in existing MPI environment" href="couple-your-code-existing-mpi-environment.html">Initialization in existing MPI environment</a></li>
          
          
          
          
          
          <li><a title="Dealing with moving meshes" href="couple-your-code-moving-meshes.html">Dealing with moving meshes</a></li>
          
          
          
          
          
          <li><a title="Dealing with FEM meshes" href="couple-your-code-fem-meshes.html">Dealing with FEM meshes</a></li>
          
          
          
          
          
          <li><a title="Dealing with distributed meshes" href="couple-your-code-distributed-meshes.html">Dealing with distributed meshes</a></li>
          
          
          
        </ul>
      </li>
      
      
      
      
      
      
      <li><a title="Porting adapters from preCICE 1.x to 2.x" href="couple-your-code-porting-adapters.html">Porting adapters from preCICE 1.x to 2.x</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Dev docs" href="#">Dev docs</a>
    <ul>
      
      
      
      <li><a title="Overview" href="dev-docs-overview.html">Overview</a></li>
      
      
      
      
      
      
      <li><a title="General coding conventions" href="dev-docs-dev-conventions.html">General coding conventions</a></li>
      
      
      
      
      
      
      <li><a title="Timings in preCICE" href="dev-docs-dev-eventtimings.html">Timings in preCICE</a></li>
      
      
      
      
      
      
      <li><a title="Logging" href="dev-docs-dev-logging.html">Logging</a></li>
      
      
      
      
      
      
      <li><a title="Optimization" href="dev-docs-dev-optimization.html">Optimization</a></li>
      
      
      
      
      
      
      <li><a title="Release workflow" href="dev-docs-dev-release.html">Release workflow</a></li>
      
      
      
      
      
      
      <li><a title="Running and writing tests" href="dev-docs-dev-testing.html">Running and writing tests</a></li>
      
      
      
      
      
      
      <li><a title="Tooling" href="dev-docs-dev-tooling.html">Tooling</a></li>
      
      
      
      
      
      
      <li><a title="Release strategy" href="dev-docs-release-strategy.html">Release strategy</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  
  <!-- Parent menu item has folderitems -->
  <li>
    <a title="Documentation meta" href="#">Documentation meta</a>
    <ul>
      
      
      
      <li><a title="Overview" href="docs-meta-overview.html">Overview</a></li>
      
      
      
      
      
      
      <li><a title="Migration guide" href="docs-meta-migration-guide.html">Migration guide</a></li>
      
      
      
      
      
      
      <li><a title="Migration cheatsheet" href="docs-meta-cheatsheet.html">Migration cheatsheet</a></li>
      
      
      
      
      
      
      <li><a title="Landing page" href="docs-meta-landing-page.html">Landing page</a></li>
      
      
      
      
    </ul>
  </li>
  
  
  
  
  <!-- if you aren't using the accordion, uncomment this block:
  <p class="external">
  <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
  </p>
  -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Special systems</h1>
</div>



<div class="post-content">

    

    <div class="row">
        <div class="col-md-10 col-sm-8">
          
          
          
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

    $('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers:  'h2,h3'  });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

          
          
        </div>

        <div class="col-md-2 col-sm-4">
            
            
                <div class="text-right">
                    <a target="_blank" rel="noopener" href="https://github.com/precice/precice.github.io_future/blob/master/pages/docs/installation/installation-special-systems.md" class="btn btn-default githubEditButton" role="button"><i class="fab fa-github fa-lg"></i> Edit me</a>
                </div>
            
            
        </div>
    </div>

   <p>This page contains instructions for building preCICE on special systems, being clusters and supercomputers.</p>

<p>The systems in the <a href="#archived-systems">archived section</a> are no longer operational.
The instructions may still be valuable for unlisted systems.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> We encourage users to actively contribute to this page! If your system is not listed, please feel encouraged to add instructions for it!</div>

<h2 id="active-systems">Active systems</h2>

<h3 id="supermuc-ng-lenovointel-munich">SuperMUC-NG (Lenovo/Intel, Munich)</h3>

<p>Login: <a href="https://doku.lrz.de/display/PUBLIC/Access+and+Login+to+SuperMUC-NG">LRZ page</a></p>

<h4 id="building">Building</h4>

<p>(1) <a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Download Eigen</a> and copy it to SuperMUC. Put in your <code class="language-plaintext highlighter-rouge">.bashrc</code>.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">EIGEN3_ROOT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Software/eigen3"</span>
</code></pre></div></div>

<p>(2) <a href="">Download latest boost</a>, copy it to SuperMUC and build yourself:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bootstrap.sh <span class="nt">--with-libraries</span><span class="o">=</span>log,thread,system,filesystem,program_options,test <span class="nt">--prefix</span><span class="o">=</span><span class="nv">$HOME</span>/Software/boost-install
./b2 <span class="nb">install</span>
</code></pre></div></div>
<p>Then, in your <code class="language-plaintext highlighter-rouge">.bashrc</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">BOOST_ROOT</span><span class="o">=</span><span class="nv">$HOME</span>/Software/boost-install
<span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="nv">$BOOST_ROOT</span>/lib:<span class="nv">$LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$BOOST_ROOT</span>/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="nv">$BOOST_ROOT</span>/include:<span class="nv">$CPLUS_INCLUDE_PATH</span>
</code></pre></div></div>

<p>(3) Some further modules you need:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load cmake
module load gcc
</code></pre></div></div>

<p>(4) Build</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CXX</span><span class="o">=</span>mpicxx cmake <span class="nt">-DBUILD_SHARED_LIBS</span><span class="o">=</span>ON <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Debug <span class="nt">-DPETSC</span><span class="o">=</span>OFF <span class="nt">-DPYTHON</span><span class="o">=</span>OFF
</code></pre></div></div>

<p>(5) Run tests. Create a <code class="language-plaintext highlighter-rouge">job.cmd</code> with</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH --time=00:10:00</span>
<span class="c">#SBATCH -J tests</span>
<span class="c">#Output and error (also --output, --error):</span>
<span class="c">#SBATCH -o ./%x.%j.out</span>
<span class="c">#SBATCH -e ./%x.%j.err</span>
<span class="c">#Initial working directory (also --chdir):</span>
<span class="c">#SBATCH -D ./</span>
<span class="c">#SBATCH --exclusive</span>
<span class="c">#SBATCH --partition=test</span>
<span class="c">#SBATCH --nodes=1</span>
<span class="c">#SBATCH --ntasks-per-node=48</span>
<span class="c">#SBATCH --account=pn56se</span>
<span class="c">#SBATCH --get-user-env</span>

module load slurm_setup

<span class="nb">rm</span> <span class="nt">-rf</span> tests
<span class="nb">mkdir </span>tests
<span class="nb">cd </span>tests
mpiexec <span class="nt">-np</span> 4 ../../Software/precice-1.6.1/build/debug/testprecice <span class="nt">--log_level</span><span class="o">=</span>test_suite <span class="nt">--run_test</span><span class="o">=</span><span class="s2">"</span><span class="se">\!</span><span class="s2">@MPI_Ports"</span>

</code></pre></div></div>

<h4 id="notes-on-openfoam">Notes on OpenFOAM</h4>

<p>To get OpenFOAM and the OpenFOAM adapter to work, some hacks are needed.</p>

<p>(1) <strong>OpenFOAM</strong>: None of the OpenFOAM modules seem to work, but you can directly:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /lrz/sys/applications/OpenFOAM/OpenFOAM-v1812+.impi.gcc/OpenFOAM-v1812/etc/bashrc_impi.gcc
</code></pre></div></div>

<p>Afterwards, you might need to reload</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load intel/19.0
</code></pre></div></div>
<p>and you also need to change</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module swap mpi.intel/2019_gcc mpi.intel/2018_gcc
</code></pre></div></div>

<p>(2) <strong>yaml-cpp</strong></p>

<p>Copy <a href="https://github.com/jbeder/yaml-cpp">yaml-cpp</a> to SuperMUC, 0.6.3 seems to work.</p>
<ul>
  <li>From <code class="language-plaintext highlighter-rouge">yaml-cpp-yaml-cpp-0.6.3</code> path: <code class="language-plaintext highlighter-rouge">mkdir build</code> and <code class="language-plaintext highlighter-rouge">cd build</code></li>
  <li><code class="language-plaintext highlighter-rouge">CXX=gcc CC=gcc cmake -DYAML_BUILD_SHARED_LIBS=ON ..</code></li>
  <li><code class="language-plaintext highlighter-rouge">make yaml-cpp</code></li>
  <li>and add to your <code class="language-plaintext highlighter-rouge">.bashrc</code>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Software/yaml-cpp-yaml-cpp-0.6.3/include:</span><span class="k">${</span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Software/yaml-cpp-yaml-cpp-0.6.3/build:</span><span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}</span><span class="s2">"</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>(3) Build the <strong>OpenFOAM adapter</strong></p>

<h4 id="notes-on-swak">Notes on SWAK</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ln -s swakConfiguration.automatic swakConfiguration</code></li>
  <li><code class="language-plaintext highlighter-rouge">export WM_NCOMPPROCS=16</code></li>
  <li><code class="language-plaintext highlighter-rouge">module load python/3.6_intel</code></li>
  <li>download bison (<code class="language-plaintext highlighter-rouge">wget http://ftp.gnu.org/gnu/bison/bison-3.0.4.tar.gz</code>) and copy it to <code class="language-plaintext highlighter-rouge">privateRequirements/sources</code></li>
</ul>

<h4 id="job-script-for-ateles">Job script for Ateles</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH --time=00:30:00</span>
<span class="c">#SBATCH -J &lt;name of your job&gt;</span>
<span class="c">#Output and error (also --output, --error):</span>
<span class="c">#SBATCH -o ./%x.%j.out</span>
<span class="c">#SBATCH -e ./%x.%j.err</span>
<span class="c">#Initial working directory (also --chdir):</span>
<span class="c">#SBATCH -D ./</span>
<span class="c">#SBATCH --mail-type=END</span>
<span class="c">#SBATCH --mail-user= &lt;your email address&gt;</span>
<span class="c">#SBATCH --exclusive</span>
<span class="c">#SBATCH --partition=test</span>
<span class="c">#SBATCH --nodes=11</span>
<span class="c">#SBATCH --ntasks-per-node=48</span>
<span class="c">#SBATCH --account= &lt;project name&gt;</span>
<span class="c">#SBATCH --ear=off</span>

module load slurm_setup
module unload devEnv/Intel/2019
module load devEnv/GCC
<span class="nb">export </span><span class="nv">FC</span><span class="o">=</span>mpif90
<span class="nb">export </span><span class="nv">CC</span><span class="o">=</span>mpicc

<span class="nv">BOOST_ROOT</span><span class="o">=</span><span class="nv">$HOME</span>/lib_precice/boost
<span class="nb">export </span><span class="nv">PRECICE_ROOT</span><span class="o">=</span><span class="nv">$HOME</span>/lib_precice/precice
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$PRECICE_ROOT</span>/build/last:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="nv">$PRECICE_ROOT</span>/build/last:<span class="nv">$LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="nv">$BOOST_ROOT</span>/lib:<span class="nv">$LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$BOOST_ROOT</span>/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="nv">$BOOST_ROOT</span>/include:<span class="nv">$CPLUS_INCLUDE_PATH</span>

<span class="c">#UPDATE intervalk in seconds</span>
<span class="nv">DELAY</span><span class="o">=</span><span class="s2">"60"</span>

<span class="nb">rm</span> <span class="nt">-f</span> simultan.machines
<span class="nb">rm</span> <span class="nt">-f</span> <span class="k">*</span>hosts
<span class="nb">rm</span> <span class="nt">-fr</span> .<span class="k">*</span>address

<span class="nb">echo</span> <span class="s2">"tpn: </span><span class="k">${</span><span class="nv">SLURM_TASKS_PER_NODE</span><span class="p">%%(*</span><span class="k">}</span><span class="s2">"</span>
<span class="k">for </span>i <span class="k">in</span> <span class="sb">`</span>scontrol show <span class="nb">hostname</span> <span class="nv">$SLURM_JOB_NODELIST</span><span class="sb">`</span><span class="p">;</span> <span class="k">do
for </span>j <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 <span class="k">${</span><span class="nv">SLURM_TASKS_PER_NODE</span><span class="p">%%(*</span><span class="k">}</span><span class="si">)</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span> <span class="o">&gt;&gt;</span> simultan.machines<span class="p">;</span> <span class="k">done
done</span>
<span class="c">#### CAUTION: NO NODE SHARING BETWEEN PARTICIPANTS IS ALLOWED! #### </span>
<span class="nv">L1</span><span class="o">=</span>1
<span class="nv">L2</span><span class="o">=</span>432
<span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">L1</span><span class="k">}</span><span class="s2">,</span><span class="k">${</span><span class="nv">L2</span><span class="k">}</span><span class="s2">p"</span> ./simultan.machines <span class="o">&gt;</span> dom1.hosts
mpiexec <span class="nt">-np</span> 432 <span class="nt">-hostfile</span> dom1.hosts &lt;Path to executable&gt; &lt;File to be executed&gt; &amp;&gt; &lt;Output file&gt; &amp;
<span class="nv">PID1</span><span class="o">=</span><span class="nv">$!</span>
<span class="nb">echo</span> <span class="nv">$PID1</span>
<span class="nv">L1</span><span class="o">=</span>433
<span class="nv">L2</span><span class="o">=</span>480
<span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">L1</span><span class="k">}</span><span class="s2">,</span><span class="k">${</span><span class="nv">L2</span><span class="k">}</span><span class="s2">p"</span> ./simultan.machines <span class="o">&gt;</span> dom2.hosts
mpiexec <span class="nt">-np</span> 37 <span class="nt">-hostfile</span> dom2.hosts &lt;Path to executable&gt; &lt;File to be executed&gt; &amp;&gt; &lt;Output file&gt; &amp;
<span class="nv">PID2</span><span class="o">=</span><span class="nv">$!</span>
<span class="nb">echo</span> <span class="nv">$PID2</span>
<span class="nv">L1</span><span class="o">=</span>481
<span class="nv">L2</span><span class="o">=</span>528
<span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">L1</span><span class="k">}</span><span class="s2">,</span><span class="k">${</span><span class="nv">L2</span><span class="k">}</span><span class="s2">p"</span> ./simultan.machines <span class="o">&gt;</span> dom3.hosts
mpiexec <span class="nt">-np</span> 2 <span class="nt">-hostfile</span> dom3.hosts &lt;Path to executable&gt; &lt;File to be executed&gt; &amp;&gt; &lt;Output file&gt; &amp;
<span class="nv">PID3</span><span class="o">=</span><span class="nv">$!</span>
<span class="nb">echo</span> <span class="nv">$PID3</span>

check_and_kill<span class="o">()</span> <span class="o">{</span>
  ps <span class="nv">$1</span>
  <span class="k">if</span> <span class="o">((</span> <span class="nv">$?</span> <span class="o">))</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">kill</span> <span class="nv">$2</span>
    <span class="k">return </span>1
  <span class="k">else
    return </span>0
  <span class="k">fi</span>
<span class="o">}</span>

<span class="k">while</span> <span class="o">[[</span> 1 <span class="o">]]</span>

<span class="k">do
 </span>check_and_kill <span class="s2">"</span><span class="nv">$PID1</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$PID2</span><span class="s2">"</span> <span class="o">||</span> <span class="nb">exit
 </span>check_and_kill <span class="s2">"</span><span class="nv">$PID2</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$PID1</span><span class="s2">"</span> <span class="o">||</span> <span class="nb">exit
 sleep</span> <span class="nv">$DELAY</span>
<span class="k">done</span>
</code></pre></div></div>

<h3 id="coolmuc-lrz-linux-cluster-munich">CooLMUC (LRZ Linux Cluster, Munich)</h3>

<h3 id="building-with-cmake">Building with CMake</h3>

<h4 id="build">Build</h4>

<p>Building preCICE on the <a href="https://www.lrz.de/services/compute/linux-cluster/overview/">LRZ Linux Cluster</a> (here CooLMUC2) is similar to building it on other supercomputers. If you load modules for any preCICE related installation, make sure the used MPI versions are consistent. This is also relevant for any solver you want to couple with preCICE. Therefore, it might be helpful to have a look in your solvers module installation before you start compiling preCICE. You can use <code class="language-plaintext highlighter-rouge">module show</code> to get information about specific modules.</p>

<h5 id="basic-building-without-petsc-or-python">Basic building (without PETSc or Python)</h5>

<p>Most of the necessary dependencies for a basic building are available via modules. We use here <code class="language-plaintext highlighter-rouge">mpi.intel/2018_gcc</code> for the MPI dependency as an example, since we later load an OpenFOAM module, which needs this MPI version.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load gcc/7
module load mpi.intel/2018_gcc
module load boost/1.68.0 <span class="c"># Read below if you need yaml-cpp</span>
module load cmake/3.12.1
</code></pre></div></div>
<p>Before running the command <code class="language-plaintext highlighter-rouge">module load mpi.intel/2018_gcc</code> the user has to run <code class="language-plaintext highlighter-rouge">module unload mpi.intel</code> to unload the preloaded mpi version.
Steps for the Eigen dependency are described in the <a href="SuperMUC">wiki page for SuperMUC</a>. Afterwards, follow the usual <a href="https://github.com/precice/precice/wiki/Building:-Using-CMake">building instructions for CMake</a>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake <span class="nt">-DBUILD_SHARED_LIBS</span><span class="o">=</span>ON <span class="nt">-DPETSC</span><span class="o">=</span>OFF <span class="nt">-DPYTHON</span><span class="o">=</span>OFF <span class="nt">-DCMAKE_INSTALL_PREFIX</span><span class="o">=</span>/path/to/precice/installation <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>RelWithDebInfo ..
make <span class="nt">-j</span> 12
make <span class="nb">install</span>
</code></pre></div></div>

<p>After installing, make sure you add the preCICE installation paths to your <code class="language-plaintext highlighter-rouge">.bashrc</code>, so that other programs can find it:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PRECICE_ROOT</span><span class="o">=</span><span class="s2">"path/to/precice_install"</span>
<span class="nb">export </span><span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span><span class="s2">"path/to/precice_install/lib/pkgconfig:</span><span class="k">${</span><span class="nv">PKG_CONFIG_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="s2">"path/to/precice_install/include:</span><span class="k">${</span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"path/to/precice_install/lib:</span><span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}</span><span class="s2">"</span>
</code></pre></div></div>

<h6 id="boost-and-yaml-cpp">Boost and yaml-cpp</h6>

<p>If you want to install a solver/adapter which depends on <strong>yaml-cpp</strong> (e.g. OpenFOAM adapter or CalculiX adapter), its compilation will probably lead to linking errors for yaml-cpp versions &gt;= 0.6. Since a yaml-cpp &lt; 0.6 requires boost &lt; 1.67 and preCICE needs at least a boost version &gt;= 1.65.1, we need to compile Boost from source. Therefore, download the desired (in your case 1.65.1) boost version from the <a href="https://www.boost.org/users/history/">boost version history</a> and <a href="https://www.lrz.de/services/compute/ssh/">copy it to the cluster</a>.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xzvf</span> boost_1_65_1.tar.gz
<span class="nb">cd </span>boost_1_65_1
./bootstrap.sh <span class="nt">--with-libraries</span><span class="o">=</span>log,thread,system,filesystem,program_options,test <span class="nt">--prefix</span><span class="o">=</span>/path/to/installation/target
./b2 <span class="nb">install</span>
</code></pre></div></div>
<p>This installs Boost in your prefix directory. You need to add the <code class="language-plaintext highlighter-rouge">prefix/lib</code> path to your <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code> and your <code class="language-plaintext highlighter-rouge">prefix/include</code> path to your <code class="language-plaintext highlighter-rouge">CPLUS_INCLUDE_PATH</code>. Additionally, set the <code class="language-plaintext highlighter-rouge">BOOST_ROOT</code> according to your 
prefix. If the boost installation is done in a separate folder, result might look like:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="s2">"path/to/boost_install/lib:</span><span class="k">${</span><span class="nv">LIBRARY_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"path/to/boost_install/lib:</span><span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="s2">"path/to/boost_install/include:</span><span class="k">${</span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="k">}</span><span class="s2">"</span>     
<span class="nb">export </span><span class="nv">BOOST_ROOT</span><span class="o">=</span><span class="s1">'path/to/boost_install'</span>
</code></pre></div></div>
<p>Then, follow the description above (without loading the boost module).</p>

<p>You can also try not installing Boost, but directly using the <code class="language-plaintext highlighter-rouge">path/to/boost_source/libs</code> and <code class="language-plaintext highlighter-rouge">path/to/boost_source/boost</code> directories instead.</p>

<h5 id="petsc">PETSc</h5>

<p>There are some available versions of PETSc. You might want to pick one of them and install preCICE. In our case, the available versions are unfortunately not compatible with our (above) chosen MPI version and the compilation fails. Hence, we install our own PETSc version:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> maint https://bitbucket.org/petsc/petsc petsc
</code></pre></div></div>
<p>PETSc depends on BLAS and LAPACK. You could either download the LAPACK tar ball, which includes also BLAS from their <a href="http://www.netlib.org/lapack/">webpage</a> or you let PETSc download and compile it automatically, which is shown below.</p>

<p>The PETSc <code class="language-plaintext highlighter-rouge">configure</code> script will fail on the login nodes, (probably) since MPI is disabled. Hence, you need to start an interactive job, before you run the script. Details on how to do this can be found on the <a href="https://doku.lrz.de/display/PUBLIC/Running+parallel+jobs+on+the+Linux-Cluster">LRZ documentation</a>.</p>

<p>If you login through lxlogin5 (CooLMUC2), you could do</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>salloc <span class="nt">--ntasks</span><span class="o">=</span>12
</code></pre></div></div>
<p>As mentioned above, we want to use <code class="language-plaintext highlighter-rouge">mpi.intel/2018_gcc</code>. You may get an error message if you run the configuration script without specifying the <code class="language-plaintext highlighter-rouge">mpi-dir</code>. If you use another version, you can look it up with <code class="language-plaintext highlighter-rouge">module show</code> under <code class="language-plaintext highlighter-rouge">I_MPI_ROOT</code>. Then, run the <code class="language-plaintext highlighter-rouge">configure</code> script and follow the instructions:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./configure <span class="nt">--with-mpi-dir</span><span class="o">=</span>/lrz/sys/intel/studio2018_p4/impi/2018.4.274 <span class="nt">--download-fblaslapack</span><span class="o">=</span>1
</code></pre></div></div>
<p>You may additionally specify a <code class="language-plaintext highlighter-rouge">--prefix</code> for the target directory. Then, you just need to set <code class="language-plaintext highlighter-rouge">PETSC_DIR= prefix</code>.
If you don’t specify it, you need to set <code class="language-plaintext highlighter-rouge">PETSC_DIR=/path/to/petsc</code> and <code class="language-plaintext highlighter-rouge">PETSC_ARCH</code>. Additionally, export your paths:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$PETSC_DIR</span>/<span class="nv">$PETSC_ARCH</span>/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">CPATH</span><span class="o">=</span><span class="nv">$PETSC_DIR</span>/include:<span class="nv">$PETSC_DIR</span>/<span class="nv">$PETSC_ARCH</span>/include:<span class="nv">$CPATH</span>
<span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="nv">$PETSC_DIR</span>/<span class="nv">$PETSC_ARCH</span>/lib:<span class="nv">$LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$PETSC_DIR</span>/<span class="nv">$PETSC_ARCH</span>/lib
</code></pre></div></div>
<p>Afterwards, you could follow the usual building instructions:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
<span class="nv">CC</span><span class="o">=</span>mpicc <span class="nv">CXX</span><span class="o">=</span>mpicxx cmake <span class="nt">-DPETSC</span><span class="o">=</span>ON <span class="nt">-DPYTHON</span><span class="o">=</span>OFF <span class="nt">-DCMAKE_INSTALL_PREFIX</span><span class="o">=</span>/path/to/precice/installation <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Release ../..
make <span class="nt">-j</span> 12
make <span class="nb">install</span>
</code></pre></div></div>

<h4 id="run-tests">Run tests</h4>
<p>Since the preCICE tests also need MPI, you need to start an interactive job as described above:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>salloc <span class="nt">--ntasks</span><span class="o">=</span>12
<span class="nb">cd</span> <span class="nv">$SCRATCH</span>/precice/build
ctest
</code></pre></div></div>
<p>Don’t forget to source your paths and modules, if you don’t specify them in your <code class="language-plaintext highlighter-rouge">.bashrc</code>.</p>

<p>Another option is the usage of a jobscript. An example might look like this:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH -o $SCRATCH/clusteroutput.out </span>
<span class="c">#SBATCH -D $SCRATCH</span>
<span class="c">#SBATCH -J precice_tests </span>
<span class="c">#SBATCH --get-user-env </span>
<span class="c">#SBATCH --clusters=mpp2</span>
<span class="c">#SBATCH --ntasks=28 </span>
<span class="c">#SBATCH --mail-type=end </span>
<span class="c">#SBATCH --mail-user=examplemail@domain.de </span>
<span class="c">#SBATCH --export=NONE </span>
<span class="c">#SBATCH --time=08:00:00 </span>
<span class="nb">source</span> /etc/profile.d/modules.sh
<span class="nb">cd</span> <span class="nv">$SCRATCH</span>/
<span class="nb">source </span>modules.txt
<span class="nb">cd</span> <span class="nv">$SCRATCH</span>/precice/build
ctest
</code></pre></div></div>
<h4 id="run-simulations">Run simulations</h4>

<p>For running coupled simulations the user can launch both the solvers from a single job script, for example:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mpirun <span class="nt">-np</span> 4 <span class="k">${</span><span class="nv">Solver1</span><span class="k">}</span> <span class="nt">-parallel</span> <span class="nt">-case</span> <span class="k">${</span><span class="nv">Participant1</span><span class="k">}</span> <span class="o">&gt;</span> <span class="k">${</span><span class="nv">Participant1</span><span class="k">}</span>.log 2&gt;&amp;1 &amp;
mpirun <span class="nt">-np</span> 4 <span class="k">${</span><span class="nv">Solver2</span><span class="k">}</span> <span class="nt">-parallel</span> <span class="nt">-case</span> <span class="k">${</span><span class="nv">Participant2</span><span class="k">}</span> <span class="o">&gt;</span> <span class="k">${</span><span class="nv">Participant2</span><span class="k">}</span>.log 2&gt;&amp;1 &amp;
</code></pre></div></div>
<p>Alternatively the user can write a <code class="language-plaintext highlighter-rouge">Allrun_parallel</code> then the script can be directly launched from the job script.</p>

<p>More information about running parallel jobs on this cluster can be found on the <a href="https://doku.lrz.de/display/PUBLIC/Running+parallel+jobs+on+the+Linux-Cluster">LRZ documentation</a>.</p>

<p>Start the job with <code class="language-plaintext highlighter-rouge">sbatch name_of_jobscript.job</code>.</p>

<h3 id="notes-on-openfoam-1">Notes on OpenFOAM</h3>

<p>There are several OpenFOAM versions available. The complete list can be found in the directory <code class="language-plaintext highlighter-rouge">/lrz/sys/applications/OpenFOAM</code>. In order to load one specific version, source the <code class="language-plaintext highlighter-rouge">bashrc</code> file. In this example, we use OpenFOAM -v1812+.impi.gcc. This corresponds to our used MPI version <code class="language-plaintext highlighter-rouge">mpi.intel/2018_gcc</code>. To source the OpenFOAM environment, run:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /lrz/sys/applications/OpenFOAM/OpenFOAM-v1812+.impi.gcc/OpenFOAM-v1812/etc/bashrc_impi.gcc_dbg
</code></pre></div></div>

<p>For the OpenFOAM adapter, yaml-cpp is needed. As mentioned above, you probably get linking errors for yaml-cpp &gt;= 0.6. Hence, we <a href="https://github.com/jbeder/yaml-cpp/archive/release-0.5.3.tar.gz">download version 0.5.3</a> and <a href="https://www.lrz.de/services/compute/ssh/">copy it to the cluster</a>. Then, run</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xzvf</span> yaml-cpp-yaml-cpp-0.5.3.tar.gz
<span class="nb">cd </span>yaml-cpp-yaml-cpp-0.5.3
<span class="nb">mkdir </span>build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake <span class="nt">-DBUILD_SHARED_LIBS</span><span class="o">=</span>ON <span class="nt">-DCMAKE_INSTALL_PREFIX</span><span class="o">=</span>path/to/install/target ..
make <span class="nt">-j</span> 12
make <span class="nb">install</span>
</code></pre></div></div>
<p>You need to add the target to your <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code>. Afterwards, compile the adapter as described in the <a href="https://github.com/precice/openfoam-adapter/wiki/Building">building instructions</a>.</p>

<h5 id="installing-the-python-bindings-for-python-2713">Installing the Python Bindings for Python 2.7.13</h5>

<details><summary>Guide to installing the Python bindings for 2.7.13 (...)</summary>
<p>
<!-- We need the above p tag and a line break before we start formatting -->

This guide provides steps to install python bindings for precice-1.6.1 for the default Python 2.7.13 on the CoolMUC. Note that preCICE no longer supports Python 2 after v1.4.0. Hence, some modifications to the python setup code was necessary. Most steps are similar if not identical to the basic guide without petsc or python above. This guide assumes that the Eigen dependencies have already been installed.

Load the prerequisite libraries:
```bash
module load gcc/7
module unload mpi.intel
module load mpi.intel/2018_gcc
module load cmake/3.12.1
```
At the time of this writing `module load boost/1.68.0` is no longer available. Instead
boost 1.65.1 was installed per the `boost and yaml-cpp` guide above. 
```bash
mkdir build &amp;&amp; cd build
cmake -DBUILD_SHARED_LIBS=ON -DPETSC=OFF -DPYTHON=OFF -DCMAKE_INSTALL_PREFIX=/path/to/precice/installation -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
make -j 12
make install
```

After installing, make sure you add the preCICE installation paths to your `.bashrc`, so that other programs can find it:
```bash
export PRECICE_ROOT="path/to/precice_install"
export PKG_CONFIG_PATH="path/to/precice_install/lib/pkgconfig:${PKG_CONFIG_PATH}"
export CPLUS_INCLUDE_PATH="path/to/precice_install/include:${CPLUS_INCLUDE_PATH}"
export LD_LIBRARY_PATH="path/to/precice_install/lib:${LD_LIBRARY_PATH}"
```

Ensure that pip is installed. If not, install pip for the local python version:
```bash
wget https://bootstrap.pypa.io/get-pip.py
module load python/2.7_intel
python get-pip.py --user
```
Install the future library
```bash
python -m pip install future --user
```
Then, navigate to the python_future bindings script.
```bash
cd /path/to/precice/src/precice/bindings/python_future/setup.py
```
Open the `setup.py` installation script and make the following modifications. Firstly, append the following to the head of the file to allow Python2 to run Python3 code. Note that
importing `unicode_literals` from `future` will cause errors in `setuptools` methods as string literals 
in code are interpreted as `unicode` with this import.
```py
from __future__ import (absolute_import, division,
                        print_function)
from builtins import (
         bytes, dict, int, list, object, range, str,
         ascii, chr, hex, input, next, oct, open,
         pow, round, super,
         filter, map, zip)
import numpy
```
Modify `mpicompiler_default = "mpic++"` to `mpicompiler_default = "mpicxx"` in line ~100-102.
Run the setup file using the default Python 2.7.13.

Add the numpy headers to the Extension to ensure that Numpy headers are detectable when loading precice
Update lines ~80-100
```py
        Extension(
                APPNAME,
                sources=bindings_sources,
                libraries=[],
                include_dirs=[numpy.get_include()],
                language="c++",
                extra_compile_args=compile_args,
                extra_link_args=link_args
            ),
        Extension(
                "test_bindings_module",
                sources=test_sources,
                libraries=[],
                include_dirs=[numpy.get_include()],
                language="c++",
                extra_compile_args=compile_args,
                extra_link_args=link_args
            )
```
Then run the setup script to install the bindings
```bash
python setup.py install --user
```
</p>
</details>

<h3 id="hazel-hen-crayintel-stuttgart">Hazel Hen (Cray/Intel, Stuttgart)</h3>

<p>:warning: This page needs updates for preCICE v2 :warning:</p>

<h3 id="hazel-hen">Hazel Hen</h3>

<h4 id="building-1">Building</h4>

<h5 id="modules">Modules</h5>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module swap PrgEnv-cray PrgEnv-gnu
module load cray-python/3.6.1.1
module load cray-petsc <span class="c"># if distributed RBF are used.</span>
module load tools/boost/1.66.0
</code></pre></div></div>
<h5 id="other-dependencies">Other dependencies</h5>

<h6 id="eigen">Eigen</h6>
<p>Install Eigen and set the variables as described in <a href="https://github.com/precice/precice/wiki/Dependencies#eigen">Dependencies</a>.</p>

<h6 id="petsc-1">PETSc</h6>
<p>Just load the module and use <code class="language-plaintext highlighter-rouge">petsc=on</code> for compilation: <code class="language-plaintext highlighter-rouge">module load cray-petsc</code></p>

<h5 id="compilation">Compilation</h5>
<p>You <strong>must</strong> use <code class="language-plaintext highlighter-rouge">platform=hazelhen</code> for compilation.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scons <span class="nv">petsc</span><span class="o">=</span>on <span class="nv">python</span><span class="o">=</span>off <span class="nv">compiler</span><span class="o">=</span>CC <span class="nv">platform</span><span class="o">=</span>hazelhen
</code></pre></div></div>

<h4 id="executing">Executing</h4>
<h5 id="aprun">aprun</h5>
<p><code class="language-plaintext highlighter-rouge">aprun</code> is used instead of <code class="language-plaintext highlighter-rouge">mpirun</code>. However, you can execute only one <code class="language-plaintext highlighter-rouge">aprun</code> per node, i.e. for two aprun calls you must reserve at least two nodes.</p>

<h5 id="network-interface">Network Interface</h5>
<p>Use <code class="language-plaintext highlighter-rouge">ipogif0</code> for socket communication.</p>

<h3 id="cartesius-dutch-national-supercomputer">Cartesius (Dutch national supercomputer)</h3>

<h4 id="modules-and-environment">modules and environment</h4>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module unload compilerwrappers
module load Boost/1.65.1-foss-2017b-Python-2.7.14 blas/netlib/gnu lapack/netlib/gnu

<span class="nb">export </span><span class="nv">PETSC_DIR</span><span class="o">=</span>
<span class="nb">export </span><span class="nv">PETSC_ARCH</span><span class="o">=</span>arch-linux
<span class="nb">export </span><span class="nv">PRECICE_ROOT</span><span class="o">=</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:<span class="nv">$SURFSARA_LIBRARY_PATH</span>:<span class="nv">$PETSC_DIR</span>/<span class="nv">$PETSC_ARCH</span>/lib:<span class="nv">$PRECICE_ROOT</span>/build
<span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LIBRARY_PATH</span>:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export </span><span class="nv">CPATH</span><span class="o">=</span><span class="nv">$CPATH</span>:<span class="nv">$SURFSARA_INCLUDE_PATH</span>:<span class="nv">$PRECICE_ROOT</span>/src
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/hpc/eb/RedHatEnterpriseServer7/CMake/3.12.1-GCCcore-6.4.0/bin
</code></pre></div></div>

<p>Set <code class="language-plaintext highlighter-rouge">PETSC_DIR</code> and <code class="language-plaintext highlighter-rouge">PRECICE_ROOT</code> as locations where you want to build PETSc and preCICE, respectively.</p>

<h4 id="petsc-2">PETSc</h4>
<p>The author built PETSc because available modules are built using intel compilers and the author didn’t try those out.
Extract PETSc into <code class="language-plaintext highlighter-rouge">$PETSC_DIR</code> and from there,</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./configure <span class="nt">--with-shared-libraries</span>
make all <span class="nb">test</span>
</code></pre></div></div>

<h4 id="precice">preCICE</h4>
<p>From <code class="language-plaintext highlighter-rouge">$PRECICE_ROOT</code>,</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
<span class="nv">CXX</span><span class="o">=</span>mpicxx cmake <span class="nt">-DBUILD_SHARED_LIBS</span><span class="o">=</span>ON <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Release <span class="nt">-DEIGEN3_INCLUDE_DIR</span>:String<span class="o">=</span>/hpc/sw/eigen-3.3.3-intel/include/eigen3 ..
make
</code></pre></div></div>

<p>For linking other projects (and python module below), <code class="language-plaintext highlighter-rouge">libprecice.so</code> is in <code class="language-plaintext highlighter-rouge">$PRECICE_ROOT/build</code> and header files are in <code class="language-plaintext highlighter-rouge">$PRECICE_ROOT/src</code>. These variables are added to <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code>, <code class="language-plaintext highlighter-rouge">LIBRARY_PATH</code>, and <code class="language-plaintext highlighter-rouge">CPATH</code> already in the first section.</p>

<p>For the python parts,</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> <span class="nv">$PRECICE_ROOT</span>/src/precice/bindings/python
python setup.py build
python setup.py <span class="nb">install</span> <span class="nt">--user</span>
</code></pre></div></div>

<h2 id="archived-systems">Archived systems</h2>

<h3 id="supermuc-lenovointel-munich">SuperMUC (Lenovo/Intel, Munich)</h3>

<p>:warning: This page needs updates for preCICE v2 :warning:</p>

<p>:information_source: SuperMUC was shut down in 2019. This page may still be useful for other clusters. See also the instructions for <a href="SuperMUC-NG">SuperMUC-NG</a>.</p>

<h3 id="building-with-cmake-1">Building with CMake</h3>

<h4 id="build-1">Build</h4>

<p>Building preCICE on SuperMUC or other LRZ systems is very similar to building it locally. The main differences are that we can easily get most of the dependencies through the module system.</p>

<h5 id="basic-building-without-python">Basic building (without Python)</h5>

<p>You may build preCICE without PETSc or Python and still use most of its features. See also the <a href="Get-preCICE">general build instructions</a>.</p>

<p>(1) Load some modules (or directly put them in your <code class="language-plaintext highlighter-rouge">.bashrc</code>)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load gcc/6
module swap mpi.ibm mpi.intel/5.1
module load petsc/3.8
module load boost/1.65_gcc
<span class="nb">export </span><span class="nv">BOOST_ROOT</span><span class="o">=</span><span class="nv">$BOOST_BASE</span>
</code></pre></div></div>

<p>(2) Get Eigen: <a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Download the latest version of Eigen</a> and copy it to SuperMUC. Specify the path in your <code class="language-plaintext highlighter-rouge">.bashrc</code>, e.g.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export EIGEN3_ROOT="$HOME/eigen3"
</code></pre></div></div>

<ul>
  <li>Don’t only get the <code class="language-plaintext highlighter-rouge">eigen/Eigen</code> folder, copy the complete archive.</li>
  <li>Don’t copy it to your <code class="language-plaintext highlighter-rouge">precice/src</code>, copy it to a separate directory (e.g. <code class="language-plaintext highlighter-rouge">eigen3</code>)</li>
</ul>

<p>(3) Get cmake. The newest version on SuperMUC (3.8) is, unfortunately, too old. We need &gt;= 3.10.2. <a href="https://cmake.org/download/">Download the latest stable version</a> and copy it to SuperMUC. Then, e.g.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xzvf</span> cmake-3.13.4.tar.gz
./bootstrap
make <span class="nt">-j28</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HOME</span>/cmake-3.13.4/bin
</code></pre></div></div>

<p>(4) Build preCICE. In the root directory of preCICE:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build/no_python
<span class="nb">cd </span>build/no_python
<span class="nv">CXX</span><span class="o">=</span>mpicxx cmake <span class="nt">-DPYTHON</span><span class="o">=</span>OFF <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Release ../..
make <span class="nt">-j28</span>
</code></pre></div></div>

<h5 id="without-petsc">Without PETSc</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build/no_petsc_no_python
<span class="nb">cd </span>build/no_petsc_no_python
<span class="nv">CXX</span><span class="o">=</span>mpicxx cmake <span class="nt">-DPETSC</span><span class="o">=</span>OFF <span class="nt">-DPYTHON</span><span class="o">=</span>OFF <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Release ../..
make <span class="nt">-j28</span>
</code></pre></div></div>

<h5 id="python">Python</h5>

<p>So far, we did not get Python to work. Please let us know if you do.</p>

<h4 id="run-tests-1">Run tests</h4>

<p>Use the job system, to run the tests. Get a <a href="https://www.lrz.de/services/compute/supermuc/loadleveler/examples_haswell_nodes/">standard job script</a> and run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#@ wall_clock_limit = 00:30:00</span>
<span class="c">#@ job_type = MPICH</span>
<span class="c">#@ job_name = Tests</span>
<span class="c">#@ class = test</span>
<span class="c">#@ island_count = 1,1</span>
<span class="c">#@ network.MPI = sn_all,not_shared,us</span>
<span class="c">#@ node = 1</span>
<span class="c">#@ tasks_per_node = 28</span>
<span class="c">#@ output = $(job_name).out</span>
<span class="c">#@ error = $(job_name).err</span>
<span class="c">#@ initialdir = $(home)/precice/build/no_python</span>
<span class="c">#@ energy_policy_tag = my_energy_tag</span>
<span class="c">#@ minimize_time_to_solution = yes</span>
<span class="c">#@ queue</span>
<span class="nb">.</span> /etc/profile
<span class="nb">.</span> /etc/profile.d/modules.sh

ctest 
</code></pre></div></div>

<h4 id="run-simulations-1">Run simulations</h4>

<p>When using socket communication on SuperMUC (as well as other LRZ clusters), it is important to specify in the <a href="">preCICE configuration file</a> that the communication should happen through the Infiniband network (<code class="language-plaintext highlighter-rouge">network="ib0"</code>), instead of the local network (<code class="language-plaintext highlighter-rouge">network="lo"</code>).</p>

<h3 id="mac-cluster-various-architectures-munich">MAC Cluster (various architectures, Munich)</h3>

<p>:warning: This page needs updates for preCICE v2 :warning:</p>

<p>:information_source: The MAC Cluster was shut down in 2018. However, these instructions may also be useful for users of other HPC systems.</p>

<h4 id="general-information">General Information</h4>
<p>Read first some information about the <a href="http://www.mac.tum.de/wiki/index.php/MAC_Cluster">MAC-Cluster</a> and about <a href="https://www.lrz.de/services/compute/linux-cluster/batch_parallel/">Running parallel jobs with SLURM</a>.</p>

<p>You may allocate an interactive shell like this:</p>

<p><code class="language-plaintext highlighter-rouge">salloc --partition=snb --ntasks=1 --cpus-per-task=32</code></p>

<p>Then you can run your executable in the interactive shell: e.g.</p>

<p><code class="language-plaintext highlighter-rouge">mpiexec.hydra -ppn 1 -n 1 ./executable parameters ...</code></p>

<p>Note that each node has 16 physical resp. 32 virtual cores. This means that the following combinations should be applied for scaling tests (to always reserve full nodes): (salloc ntasks, salloc cpus-per-task, mpiexec ppn, mpiexec n): (1,32,1,1), (2,16,2,2), (4,8,4,4), (8,4,8,8), (16,2,16,16), (32,2,16,32), (64,2,16,64), …</p>

<h4 id="building-precice">Building preCICE</h4>
<p>To build preCICE on the MAC Cluster you may follow the same <a href="SuperMUC">instructions for building for SuperMUC</a>.
In SCons you need to set <code class="language-plaintext highlighter-rouge">platform=supermuc</code> also in the case of the MAC Cluster. Note that, in contrast to SuperMUC, you can access GitHub from the MAC Cluster.</p>

<p>You should build preCICE on the login node of the MAC Cluster partition that you are going to use.</p>

<h4 id="running-the-tests">Running the tests</h4>
<p>In order to run the tests, <a href="SuperMUC">the same instructions as for SuperMUC</a> apply. After you load the correct modules, you may execute the tests in a compute node, from your <code class="language-plaintext highlighter-rouge">PRECICE_ROOT</code> directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>salloc <span class="nt">--partition</span><span class="o">=</span>snb <span class="nt">--ntasks</span><span class="o">=</span>1 <span class="nt">--cpus-per-task</span><span class="o">=</span>32
srun ./tools/compileAndTest.py <span class="nt">-t</span>
<span class="nb">exit</span>
</code></pre></div></div>

<p><strong>Note:</strong> Before preCICE v1.1.0, the <code class="language-plaintext highlighter-rouge">-t</code> option was named <code class="language-plaintext highlighter-rouge">-b</code>.</p>

<h3 id="marenostrum-lenovointel-barcelona">MareNostrum (Lenovo/Intel, Barcelona)</h3>

<p>:warning: This page needs updates for preCICE v2 :warning:</p>

<h4 id="build-2">Build</h4>

<p>See also the <a href="Building">general build instructions</a>.</p>

<ul>
  <li>To be put in your .bashrc:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load python  <span class="c">#needed by scons</span>
module unload intel
module load gcc/4.8.2
module switch openmpi impi
<span class="nb">export </span><span class="nv">PRECICE_BOOST_ROOT</span><span class="o">=</span><span class="nv">$HOME</span>/software/boost_1_53_0
</code></pre></div></div>
<ul>
  <li>copy boost_1_53_0 to <code class="language-plaintext highlighter-rouge">software</code> (no installation needed!)</li>
  <li>copy <code class="language-plaintext highlighter-rouge">Eigen</code> to <code class="language-plaintext highlighter-rouge">src</code> (just as usual)</li>
  <li><code class="language-plaintext highlighter-rouge">scons petsc=off python=off compiler=mpicxx build=release platform=supermuc -j32</code></li>
</ul>

<h4 id="alya">ALYA</h4>
<ul>
  <li>you have to further <code class="language-plaintext highlighter-rouge">module load intel</code> (but only once preCICE is compiled)</li>
  <li>configure ALYA with <code class="language-plaintext highlighter-rouge">-L[PathToPreCICE]/build/last -lprecice -lstdc++ -lrt</code></li>
  <li>for running: also put <code class="language-plaintext highlighter-rouge">module load intel</code> in your jobscript</li>
  <li>use <code class="language-plaintext highlighter-rouge">network="ib0"</code> for sockets communication beyond one node</li>
</ul>



    <div class="tags">
        
    </div>



</div>

<hr class="faded"/>

<footer>
	<div class="row text-center">

		 Site last generated: Mar 7, 2021 <br />

		<section class="copyright">
			<a class="no-icon" rel="license" href="https://creativecommons.org/licenses/by/4.0/">
				<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
			</a> <br />
			This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
		</section>

	</div>

</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
